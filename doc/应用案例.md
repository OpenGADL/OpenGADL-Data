[TOC]

# 应用案例

本文档旨在介绍OpenGADL_Data软件的快速使用流程。我们将以三类标注任务为例简要阐述软件的使用流程，帮助用户快速上手并熟悉软件的基本功能。

## 1.创建图像分类数据集并完成标注

- 打开OpenGADL_Data软件，点击左上角<font color = 'red'>**创建数据集**</font>按钮创建数据集，弹出的对话框中输入数据集名称并选择标注类型**“图像分类”**。

  ![创建数据集](https://raw.githubusercontent.com/OpenGADL/OpenGADL-Data/main/picture/202310251703338.png)
  
  <center>图1.1 创建数据集对话框</center>
  
  

​		创建完成后点击<font color = 'red'>**确定**</font>按钮。



- 之后数据集控件区域生成创建的数据集控件，内含该数据集的相关信息，于控件左侧展示。对于刚创建的数据集需要导入图片，点击按钮区域下方的<font color='red'>**导入图片**</font>，在弹出的文件对话框中选择一个**根目录下**含有

  **[.bmp .cur .gif .icns .ico .jpeg .jpg .pbm .pgm .png .ppm .svg .svgz .tga .tif .tiff .wbmp .webp .xbm .xpm]**

  这20种后缀格式中的一种或多种的图像的**文件夹**，导入成功会弹出对话框提示。如果根目录下**不含有规定格式的图像文件**或**导入文件名称重复的图片**，会提示导入失败。

  ![导入图片](https://raw.githubusercontent.com/OpenGADL/OpenGADL-Data/main/picture/202310251704039.png)

  <center>图1.2 数据集导入图片</center>

  

- 导入图片成功之后点击数据集控件的<font color='red'>**标注数据集**</font>，跳转到如下图所示的标注界面。对于图像分类标注，标注界面按水平方向划分为两个区域，左侧是图像显示区域，上面显示选中的主图区域，下面则是可视化的缩略图；右侧是三个浮动控件，分别是**“分类标签”**”、 **“类别输入”**和**“文件列表”**。

  

- 分类标注的方式如下：在右侧的 **“类别输入”**的浮动控件中，**按行输入**类别名称，然后点击下方<font color='red'>**生成标签复选框**</font>按钮，之后会在“**分类标签**”部分生成输入标签类别的复选框，点击复选框即可勾选图片的类别。

  ![分类标注](https://raw.githubusercontent.com/MagnetoXxz/My_pictures/main/Data_picture/202310251705406.png)

  <center>图1.3 数据集的分类标注</center>

  

  

- 数据集划分：标注完成后点击下方缩略图区域的<font color='red'>**返回数据管理界面**</font>按钮即可返回到数据管理界面，点击数据集控件的<font color='red'>**数据集划分**</font>按钮 。数据集划分的目的是将已标注的图像随机划分到训练、标注和检测数据集，便于后续模型训练和测试时文件的读取，具体操作可见对话框的说明部分，输入合法会完成数据集划分，对话框显示划分成功并在后端生成对应文件。

  ![数据集划分](https://raw.githubusercontent.com/MagnetoXxz/My_pictures/main/Data_picture/202310251706853.png)

  <center>图1.4 数据集划分</center>

​		

- 标签文件目录：

​		标注完成后用户可以在本地查看标签文件，存放的路径在软件安装目录下的**“Gaml_Dataset”**文件夹中，找到与该数据集同名的文件夹，对于**分类数据集**目录如下：

```python
|-- annotations	
	|-- 001.json	#标注图片对应的json文件
    |-- 002.json
    ...
    
|-- config
	|-- categories.txt		#分类标注类别字典
	|-- train.txt		#完成“数据集划分”生成，val、test同理
	|-- val.txt
	|-- test.txt

|-- images.txt		#数据集图片路径文件
    
|-- project_info.json	#数据集信息文件
```



- 说明三点：

  1. 输入的字符类型只支持大小写英文字母，数字及下划线。

  2. 本软件支持的是单图片单类别的图像标注，即至多只能对一个复选框打勾。

  3. 第一次进行标注时，为一张图片生成分类标签之后，点击其余图片“Classification Label”区域会自动产生输入标签的复选框，如果需要新增其他类别的标签，则需要在“Category Input”区域重新输入并生成标签按钮。

      

## 2.创建语义分割数据集并完成标注

- 打开OpenGADL_Data软件，点击左上<font color = 'red'>**创建数据集**</font>按钮创建数据集，弹出的悬浮框中输入数据集名称并选择标注类型**“语义分割”**。

  创建完成后点击<font color = 'red'>**确定**</font>按钮。

  

- 导入图片部分同上。



- 导入图片成功之后点击数据集控件的<font color='red'>**标注数据集**</font>，跳转到标注界面。对于语义分割标注，支持左侧工具栏中的<font color='red'>**“创建多边形”**</font>、<font color='red'>**“创建多段线”**</font>、<font color = red>**“创建直线”**</font>、<font color='red'>**“创建圆”**</font>和<font color='red'>**“创建点”**</font>这五类手动标注工具，也支持<font color='red'>**交互式分割**</font>这类自动标注工具。下面将分开阐述。

  - **手动分割标注**：以<font color='red'>**“创建多边形”**</font>为例，点击左侧工具栏对应按钮，鼠标移动至画布区域后指针变成十字型表示处于绘制状态，单击鼠标左键在图片上确定分割点位置，移动鼠标并绘制分割点直至构成闭合曲线。

    之后弹出的对话框**"标注标签"**中输入标注的类别，点击<font color='red'>**确定**</font>即可形成新的标签。

    ![手动标注](https://raw.githubusercontent.com/MagnetoXxz/My_pictures/main/Data_picture/202310251708847.png)

    <center>图2.1 数据集的手动分割标注</center>

    

    如果之后不需要进行标注的话，点击左侧工具栏<font color='red'>**标注完成**</font>图标将鼠标光标切回至指针，即表示从绘制状态转换到编辑状态。

    标注完成后可以单击选中图片中的标签实例，点击<font color='red'>**编辑选择标签**</font>图标或双击**”标签实例“**中的复选框可以再次弹出“**标注标签**”的对话框，用户可以在此修改标签类别的名称。如果是对标签形状的微调，可以移动任意分割点或者拖拽整个闭合分割形状。

    

  - **交互式分割标注**：在工具栏自动标注工具区域点击<font color='red'>**交互式分割**</font>图标进行交互式分割标注，在弹出的对话框中输入需要分割的类别名称，点击<font color='red'>**开始**</font>按钮后软件后端完成模型加载和特征图计算，“模型准备”进度条显示100%时对话框自动关闭，即可开始交互式分割。

    ![交互式](https://raw.githubusercontent.com/MagnetoXxz/My_pictures/main/Data_picture/202310251709678.png)

    <center>图2.2 数据集的自动分割标注(交互式)</center>

    

    在主图区域**单击鼠标左键选择正样本点(绿色)**，**单击鼠标右键选择负样本点(红色)**，主图区域会实时生成预测掩码，分割完成后点击<font color='red'>**完成自动化标注**</font>图标保存到标签文件，再开始下一个类别的分割。

    点击<font color='red'>**手动微调**</font>图标可以使用画刷工具修改已经完成交互式分割标注的掩码，选择**"涂鸦"**及对应类别可以为特定区域生成该类别的分割掩码，选择**"擦除"**可以移除掩码，画刷功能完成后点击<font color='red'>**完成自动化标注**</font>图标即可保存到标签文件。

    

- 数据集划分同上。

  
  
- 标签文件目录：

  标注完成后用户可以在本地查看标签文件，存放的路径在软件安装目录下的“**Gaml_Dataset**”文件夹中，找到与该数据集同名的文件夹，对于**分割数据集**目录如下：
  
  ```python
  |-- annotations	
  	|-- 001.json	#标注图片对应的json文件
      |-- 002.json
      ...
      
  |-- config
  	|-- categories.txt		#分割标注类别字典
  	|-- train.txt		#完成“数据集划分”生成，val、test同理
  	|-- val.txt
  	|-- test.txt
  
  |-- SemanticSegmentation
  	|-- 001.png		#标注图片对应的mask文件
      |-- 002.png
      ...
      
  |-- images.txt		#数据集图片路径文件
      
  |-- project_info.json	#数据集信息文件
  ```
  
  
  
- 说明三点：

  1. 同一张图片手动分割标注和自动分割标注只能二选一，选择一类方式后续的标注和标签微调只能采用该方式。
  2. 分割标注不支持<font color='red'>**创建矩形框**</font>，这是目标检测的标注工具，故按钮禁使能。
  3. 对于手动分割标注，完成标注、对标签做任意编辑和调整后都不需要点击保存按钮，软件将在后端自动保存。



## 3.创建目标检测数据集并完成标注

目标检测数据集的创建参考上述步骤，选择的类别是**目标检测**，而标注的过程可以参考分割数据集的“手动分割标注”部分，检测标注仅支持使用<font color='red'>**创建矩形框**</font>工具，其余细节参考手动分割标注，此处不再赘述。

![检测标注](https://raw.githubusercontent.com/MagnetoXxz/My_pictures/main/Data_picture/202310251710425.png)

<center>图3.1 数据集的检测标注</center>
